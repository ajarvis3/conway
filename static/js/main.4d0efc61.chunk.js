(this.webpackJsonpconway=this.webpackJsonpconway||[]).push([[0],{17:function(t,e,n){},18:function(t,e,n){},21:function(t,e,n){"use strict";n.r(e);var i=n(0),c=n.n(i),r=n(9),u=n.n(r),a=(n(17),n(18),n(4)),h=n(1),s=Object(a.b)({key:"widthState",default:5}),f=Object(a.b)({key:"heightState",default:5}),l=Object(a.b)({key:"runState",default:!1}),o=n(2),v=function(){var t=Object(a.c)(l),e=Object(h.a)(t,2),n=e[0],i=e[1];return Object(o.jsx)("button",{onClick:function(){return i(!n)},children:n?"Stop":"Run"})},j=function(t){var e=t.state,n=t.setState,i=t.label;return Object(o.jsxs)("span",{children:[i,":",Object(o.jsx)("input",{type:"number",onChange:function(t){n(parseInt(t.target.value))},value:e})]})},b=function(){var t=Object(a.c)(s),e=Object(h.a)(t,2),n=e[0],i=e[1],c=Object(a.c)(f),r=Object(h.a)(c,2),u=r[0],l=r[1];return Object(o.jsxs)("div",{id:"control",children:[Object(o.jsx)(j,{state:n,setState:i,label:"Width"}),Object(o.jsx)(j,{state:u,setState:l,label:"Height"}),Object(o.jsx)(v,{})]})};var d=function(t,e){var n=Object(i.useRef)(t);Object(i.useEffect)((function(){n.current=t}),[t]),Object(i.useEffect)((function(){if(null!==e){var t=setInterval((function(){return n.current()}),e);return function(){return clearInterval(t)}}}),[e])},O=n(3),g=n(5),w=function(){function t(e,n){Object(O.a)(this,t),this.alive=void 0,this.width=void 0,this.height=void 0,this.width=e,this.height=n,this.alive=new Array(n).fill(!1).map((function(){return new Array(e).fill(!1)}))}return Object(g.a)(t,[{key:"toggleAlive",value:function(e,n){var i=new t(this.width,this.height);return i.alive=this.alive.map((function(t){return t.slice()})),i.alive[e][n]=!this.alive[e][n],i}},{key:"runRound",value:function(){var e=new t(this.width,this.height);e.alive=this.alive.map((function(t){return t.slice()}));for(var n=0;n<this.height;n++)for(var i=0;i<this.width;i++){var c=0;n>0&&this.alive[n-1][i]&&(c+=1),n<this.height-1&&this.alive[n+1][i]&&(c+=1),i>0&&this.alive[n][i-1]&&(c+=1),i<this.width-1&&this.alive[n][i+1]&&(c+=1),n>0&&i>0&&this.alive[n-1][i-1]&&(c+=1),n>0&&i<this.width-1&&this.alive[n-1][i+1]&&(c+=1),n<this.height-1&&i>0&&this.alive[n+1][i-1]&&(c+=1),n<this.height-1&&i<this.width-1&&this.alive[n+1][i+1]&&(c+=1),c<2||c>3?e.alive[n][i]=!1:this.alive[n][i]||3!==c||(e.alive[n][i]=!0)}return e}}]),t}(),p=function(){var t=Object(a.d)(s),e=Object(a.d)(f),n=Object(a.d)(l),c=Object(i.useRef)(0),r=Object(i.useRef)(0),u=Object(i.useRef)(null),v=Object(i.useRef)((function(){})),j=Object(i.useState)(new w(t,e)),b=Object(h.a)(j,2),O=b[0],g=b[1];Object(i.useEffect)((function(){if(u&&u.current){var t=u.current.getContext("2d");t.clearRect(0,0,u.current.width,u.current.height),t.lineWidth=3;for(var e=0;e<O.height;e++)for(var n=0;n<O.width;n++){console.log(n,e,O);var i=O.alive[e][n]?"#ffffff":"#000000",a=O.alive[e][n]?"#000000":"#ffffff",h=n*c.current,s=e*r.current;t.fillStyle=i,t.fillRect(h,s,c.current,r.current),t.fillStyle=a,t.beginPath(),t.rect(h,s,c.current,r.current),t.stroke()}}}),[O,t,e]),Object(i.useEffect)((function(){u&&(g(new w(t,e)),c.current=u.current.width/t,r.current=u.current.height/e)}),[t,e]),Object(i.useEffect)((function(){v.current=n?function(){g(O.runRound())}:function(){}})),d((function(){v.current()}),1e3);var p=Object(i.useCallback)((function(t){if(u&&u.current){var e=Math.floor(t.nativeEvent.offsetX/c.current),n=Math.floor(t.nativeEvent.offsetY/r.current);g(O.toggleAlive(n,e))}}),[O,t,e]);return Object(o.jsx)("canvas",{id:"conway-game",ref:u,onClick:p,width:.9*window.innerWidth,height:.9*window.innerHeight})};var x=function(){return Object(o.jsx)(a.a,{children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(b,{}),Object(o.jsx)(p,{})]})})},y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(e){var n=e.getCLS,i=e.getFID,c=e.getFCP,r=e.getLCP,u=e.getTTFB;n(t),i(t),c(t),r(t),u(t)}))};u.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(x,{})}),document.getElementById("root")),y()}},[[21,1,2]]]);
//# sourceMappingURL=main.4d0efc61.chunk.js.map